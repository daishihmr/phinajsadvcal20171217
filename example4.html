<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1,maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta charset="UTF-8">
</head>

<body>
  <script src="https://s3-ap-northeast-1.amazonaws.com/cubism3.live2d.com/sdk/js_eap/live2dcubismcore.min.js"></script>
  <script src="https://rawgit.com/Live2D/CubismJsComponents/master/example/wwwroot/js/live2dcubismframework.js"></script>
  <script src="https://rawgit.com/toji/gl-matrix/v2.4.0/dist/gl-matrix.js"></script>
  <script src="https://rawgit.com/phinajs/phina.js/develop/build/phina.js"></script>
  <script src="https://rawgit.com/daishihmr/phigl.js/develop/build/phigl.js"></script>
  <script src="https://rawgit.com/daishihmr/phina.live2d.js/develop/phina.live2d.js"></script>
  <script>
  phina.globalize();

  phina.main(() => {
    var app = GameApp({
      backgroundColor: "#99bb10",
      fps: 60,
      width: 960,
      height: 1280,
      assets: {
        "live2d.moc": {
          "hiyori": "assets/hiyori/hiyori_pro_t07.moc3",
        },
        "image": {
          "hiyori0": "assets/hiyori/hiyori_pro_t07.2048/texture_00.png",
          "hiyori1": "assets/hiyori/hiyori_pro_t07.2048/texture_01.png",
        },
        "live2d.motion": {
          "hiyori01": "assets/hiyori/hiyori_m01.motion3.json",
        },
        "live2d.physics": {
          "hiyori": "assets/hiyori/hiyori_pro_t07.physics3.json",
        },
      },
      startLabel: "main",
    });
    // app.enableStats();
    app.run();
  });

  phina.define("MainScene", {
    superClass: "DisplayScene",

    init: function() {
      this.superInit({
        width: 960,
        height: 1280,
      });

      let live2dLayer = Live2DLayer({
        width: 960,
        height: 1280,
        originX: 0,
        originY: 0,
      }).addChildTo(this);

      let sprite = Live2DSprite({
          moc: "hiyori",
          textures: ["hiyori0", "hiyori1"],
          physics: "hiyori",
        })
        .setPosition(480, 640)
        .setScale(0.5)
        .addChildTo(live2dLayer);

      sprite.play("hiyori01");
    },
  });
  </script>
</body>

</html>